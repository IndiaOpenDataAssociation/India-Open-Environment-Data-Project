!function(t){function r(e){if(n[e])return n[e].exports;var i=n[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,r,n){n(12)},function(t,r){t.exports=d3},function(t,r,n){var e;e=n(1),angular.module("ad3").directive("d3Arc",function(){var t;return t=function(){return{x:0,y:1,innerRadius:0,labelRadius:0,transition:"cubic-in-out",transitionDuration:1e3,value:"value",label:"label"}},{restrict:"E",require:"^d3Chart",link:function(r,n,i,a){var o,u,l,c,s,d,f,h;return f=angular.extend(t(),i),c=a.getChart(),s=parseFloat(f.innerRadius),d=parseFloat(f.labelRadius),l=null,u=null,o=null,h=function(t){var r,n,i,c;return l||(l=a.getChart().append("g").attr("class","arc")),u||(u=l.append("path")),o||(o=l.append("text").attr("class","arc-label").attr("dy","0.35em").style("text-anchor","middle")),null!=t&&0!==t.length?(c=Math.min(a.innerWidth,a.innerHeight)/2,l.attr("transform","translate("+c+","+c+")"),r=e.svg.arc().outerRadius(c).innerRadius(c*s).startAngle(0).endAngle(function(t){return t/100*2*Math.PI}),n=function(t){var n;return null==this._current&&(this._current=0),n=e.interpolate(this._current,t),this._current=t,function(t){return r(n(t))}},i=e.svg.arc().outerRadius(c*d).innerRadius(c*d),u.datum(t[f.value]).transition().ease(f.transition).duration(f.transitionDuration).attrTween("d",n),o.text(t[f.label])):void 0},a.registerElement(h,f.order)}}})},function(t,r){angular.module("ad3").directive("d3Area",function(){var t;return t=function(){return{}},{restrict:"E",require:"^d3Chart",scope:{columns:"="},link:function(r,n,e,i){var a,o,u,l,c,s,d;return l=angular.extend(t(),e),s=i.getScale(l.xscale||l.x),d=i.getScale(l.yscale||l.y),l.vertical?(a=d3.svg.area().y(function(t){return s(t.x)}).x0(0).x1(function(t){return d(t.y)}),u=d3.svg.area().y(function(t){return s(t.x)}).x0(function(t){return d(t.y0)}).x1(function(t){return d(t.y+t.y0)})):(a=d3.svg.area().x(function(t){return s(t.x)}).y0(function(){return i.innerHeight}).y1(function(t){return d(t.y)}),u=d3.svg.area().x(function(t){return s(t.x)}).y0(function(t){return d(t.y0)}).y1(function(t){return d(t.y+t.y0)})),o=null,c=function(t){var n,e,c,s,d,f,h;return o||(o=i.getChart().append("g").attr("class","area")),null!=t&&0!==t.length&&(null!=l.y&&(e=l.y),null!=r.columns&&(e=r.columns),null!=e&&(angular.isString(e)&&(e=e.split(",").map(function(t){return t.trim()})),0!==e.length))?(c=function(){var r,n,i;for(i=[],r=0,n=e.length;n>r;r++)s=e[r],i.push({name:s,values:function(){var r,n,e;for(e=[],r=0,n=t.length;n>r;r++)h=t[r],e.push({x:h[l.x],y:h[s]});return e}()});return i}(),d=d3.layout.stack().values(function(t){return t.values}),null!=l.offset&&d.offset(l.offset),f=d(c),n=o.selectAll("path.area").data(f),n.enter().append("path"),n.attr("class",function(t){return"area "+t.name}).transition().duration(500).attr("d",function(t,r){return 0===r?a(t.values):u(t.values)}),n.exit().attr("d",function(t,r){return 0===r?a(t.values):u(t.values)}).remove()):void 0},r.$watch("columns",i.redraw,!0),i.registerElement(c,l.order)}}})},function(t,r){angular.module("ad3").directive("d3Axis",["d3locale",function(t){var r;return r=function(){return{orientation:"bottom",ticks:"5",extent:!1}},{priority:1,restrict:"E",require:"^d3Chart",scope:{customTimeFormat:"=",filter:"=",tickValues:"="},link:function(t,n,e,i){var a,o,u,l,c,s,d,f,h,g,m,p,v;return d=angular.extend(r(),e),h=function(){return"top"===d.orientation||"bottom"===d.orientation?null!=d.reverse?[i.innerWidth,0]:[0,i.innerWidth]:null!=d.reverse?[0,i.innerHeight]:[i.innerHeight,0]},p=function(){return"bottom"===d.orientation?"translate(0, "+i.innerHeight+")":"top"===d.orientation?"translate(0, 0)":"left"===d.orientation?"translate(0, 0)":"right"===d.orientation?"translate("+i.innerWidth+", 0)":void 0},m="time"===d.scale?d3.time.scale():d.scale?d3.scale[d.scale]():d3.scale.linear(),l=function(){var r,n,e;return r=d3.svg.axis().scale(m).orient(d.orientation),d.ticks&&r.ticks(d.ticks),d.timeScale&&r.ticks(d3.time[d.timeScale],d.timeInterval),t.tickValues&&r.tickValues(t.tickValues),d.tickSize&&(e=d.tickSize.split(","),r.innerTickSize(e[0]),r.outerTickSize(e[1])),null!=t.customTimeFormat&&(n=d3.time.format.multi(angular.copy(t.customTimeFormat)),r.tickFormat(function(t){return n(new Date(t))})),null!=d.timeFormat?(n=d3.time.format(d.timeFormat),r.tickFormat(function(t){return n(new Date(t))})):null!=d.format&&(n=d3.format(d.format),r.tickFormat(n)),r},f=function(t){return"bottom"===d.orientation?t.attr("x",""+i.innerWidth/2).attr("dy",""+i.margin.bottom).attr("style","text-anchor: middle;"):"top"===d.orientation?t.attr("x",""+i.innerWidth/2).attr("dy",""+-i.margin.top).attr("style","text-anchor: middle;"):"left"===d.orientation?t.attr("x","-"+i.innerHeight/2).attr("dy",""+(-i.margin.left+18)).attr("style","text-anchor: middle;").attr("transform","rotate(-90)"):"right"===d.orientation?t.attr("x",""+i.innerHeight/2).attr("dy",""+(-i.margin.right+18)).attr("style","text-anchor: middle;").attr("transform","rotate(90)"):void 0},u=function(t,r){return"bottom"===d.orientation?t.call(r.tickSize(i.innerHeight,0,0).tickFormat("")):"top"===d.orientation?t.attr("transform","translate(0, "+i.innerHeight+")").call(r.tickSize(i.innerHeight,0,0).tickFormat("")):"left"===d.orientation?t.attr("transform","translate("+i.innerWidth+", 0)").call(r.tickSize(i.innerWidth,0,0).tickFormat("")):"right"===d.orientation?t.call(r.tickSize(i.innerWidth,0,0).tickFormat("")):void 0},a=function(t){var r,n,e;return e=t.selectAll(".tick text"),d.tickDy&&e.attr("dy",d.tickDy),d.tickDx&&e.attr("dx",d.tickDx),d.tickAnchor&&e.style("text-anchor",d.tickAnchor),n=d3.select(e[0].slice(-1)[0]),d.lastTickDy&&n.attr("dy",d.lastTickDy),d.lastTickDx&&n.attr("dx",d.lastTickDx),d.lastTickAnchor&&n.style("text-anchor",d.lastTickAnchor),r=d3.select(e[0][0]),d.firstTickDy&&r.attr("dy",d.firstTickDy),d.firstTickDx&&r.attr("dx",d.firstTickDx),d.listTickAnchor?r.style("text-anchor",d.firstTickAnchor):void 0},o=null,c=null,s=null,g=function(t){var r,n;if(null!=t&&0!==t.length)return o||(o=i.getChart().append("g").attr("class","axis axis-"+d.orientation+" axis-"+d.name).attr("transform",p())),d.label&&(s||(s=o.append("text").attr("class","axis-label").text(d.label))),d.grid&&(c||(c=i.getChart().append("g").attr("class","axis-grid axis-grid-"+d.name))),r=l(),s&&f(s.transition().duration(500)),o.transition().duration(500).attr("transform",p()).call(r).selectAll("tick text").tween("attr.dx",null).tween("attr.dy",null).tween("style.text-anchor",null),null!=c&&u(c.transition().duration(500),r),n=o.selectAll(".tick text"),o.call(a)},v=function(r){var n,e;if(null!=r&&0!==r.length)return m.range(h()),d.domain,e=t.filter?t.filter(r):function(){var t,e,i;for(i=[],t=0,e=r.length;e>t;t++)n=r[t],i.push(n[d.name]);return i}(),d.extent?m.domain(d3.extent(e)):m.domain([0,d3.max(e)])},i.addScale(d.name,m,v),i.registerElement(g,d.order),t.$watchCollection("tickValues",i.redraw),t.$watchCollection("customTimeFormat",i.redraw),t.$watch("filter",i.redraw),t.$watch("tickValues",i.redraw)}}}])},function(t,r){angular.module("ad3").directive("d3Bars",function(){var t;return t=function(){return{x:0,y:1,width:15}},{restrict:"E",require:"^d3Chart",link:function(r,n,e,i){var a,o,u,l,c,s,d,f;return l=angular.extend(t(),e),d=i.getScale(l.xscale||l.x),f=i.getScale(l.yscale||l.y),o=i.getChart(),u=i.innerHeight,s=l.width,a=null,c=function(t){var r;return a||(a=i.getChart().append("g").attr("class","bars")),null!=t&&0!==t.length?(r=a.selectAll("rect.bar").data(t),r.exit().transition().duration(500).attr("y",function(){return i.innerHeight}).attr("height",0).remove(),r.transition().duration(500).attr("x",function(t){return d(t[l.x])-s/2}).attr("y",function(t){return f(t[l.y])}).attr("height",function(t){return i.innerHeight-f(t[l.y])}).attr("width",s),r.enter().append("rect").attr("class",function(t,r){return"bar bar-"+r}).attr("x",function(t){return d(t[l.x])-s/2}).attr("width",s).attr("y",function(){return i.innerHeight}).attr("height",0).transition().duration(500).attr("y",function(t){return f(t[l.y])}).attr("height",function(t){return i.innerHeight-f(t[l.y])})):void 0},i.registerElement(c,l.order)}}})},function(t,r){angular.module("ad3").directive("d3Chart",function(){return{restrict:"EA",scope:{margin:"=",data:"="},controller:["$scope","$element","$attrs","$window","$timeout",function(t,r,n,e,i){var a,o,u,l,c,s,d,f,h;c=t.scales={},u=t.elements=[],this.margin=t.margin||{top:10,right:10,bottom:10,left:10},d=d3.select(r[0]).append("svg").attr("class","d3").attr("width","100%").attr("height","100%"),h=function(){return r[0].offsetWidth},l=function(){return r[0].offsetHeight},a=d.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.getSvg=function(){return d},this.getChart=function(){return a},this.addScale=function(t,r,n){return c[t]={scale:r,update:n}},this.getScale=function(t){return c[t].scale},this.registerElement=function(t,r){return null==r&&(r=0),u.push({redraw:t,order:Number(r)})},f=function(t){return function(){return t.width!==h()||t.height!==l()?(t.width=h(),t.height=l(),t.innerWidth=t.width-t.margin.left-t.margin.right,t.innerHeight=t.height-t.margin.top-t.margin.bottom,t.redraw()):void 0}}(this),s=function(t,r){return t.order-r.order},o=null,this.redraw=function(r){return function(){return o||0===r.width||0===r.height?void 0:o=i(function(){var r,n,e,i,a,l,d,f;o=null,r=t.data;for(a in c)f=c[a],f.update(r);for(l=u.sort(s),d=[],e=0,i=l.length;i>e;e++)n=l[e],d.push(n.redraw(r));return d},n.updateInterval||200)}}(this),e.addEventListener("resize",f),"deep"===n.watch?t.$watch("data",this.redraw,!0):t.$watch("data",this.redraw),t.$watch(f),f()}]}})},function(t,r){angular.module("ad3").directive("d3Data",["d3Service",function(t){return{restrict:"E",scope:{accessor:"=",callback:"=",data:"="},link:function(r,n,e){var i;return i=e.src,t.csv(i,r.accessor,r.callback).then(function(t){return r.data=t},function(){throw"Error loading CSV via D3"})}}}])},function(t,r){angular.module("ad3").directive("d3Gradient",function(){var t;return t={transition:500},{restrict:"E",require:"^d3Chart",link:function(r,n,e,i){var a,o,u;return o=i.getSvg(),a=o.insert("defs","g").append("linearGradient").attr("id",e.ref),["x1","x2","y1","y2"].forEach(function(t){return e.$observe(t,function(r){return a.attr(t,r)})}),u=t.transition,e.$observe("transition",function(t){return null!=t?u=t:void 0}),r.$watch(e.stops,function(t){return null!=t?(t=a.selectAll("stop").data(t),t.enter().append("stop"),t.attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}).attr("stop-opacity",function(t){return null!=t.opacity?t.opacity:1}),t.exit().remove()):void 0})}}})},function(t,r){angular.module("ad3").directive("d3Include",function(){return{restrict:"E",require:"^d3Chart",link:function(t,r,n,e){var i,a;return i=e.getChart(),a=i.append("g").attr("class","includes"),a.html(r.html())}}})},function(t,r){angular.module("ad3").directive("d3Line",function(){var t;return t=function(){return{x:0,y:1}},{restrict:"E",require:"^d3Chart",link:function(r,n,e,i){var a,o,u,l,c,s;return u=angular.extend(t(),e),c=i.getScale(u.xscale||u.x),s=i.getScale(u.yscale||u.y),a=d3.svg.line().x(function(t){return c(t[u.x])}).y(function(t){return s(t[u.y])}),o=null,l=function(t){return o||(o=i.getChart().append("path").attr("class","line line-"+(u.name||u.y)).style("fill","none").style("stroke",u.stroke)),null!=t&&0!==t.length?o.datum(t).transition().duration(500).attr("d",a):void 0},i.registerElement(l,u.order)}}})},function(t,r){angular.module("ad3").directive("d3Pie",function(){var t;return t=function(){return{x:0,y:1,innerRadius:0,labelRadius:.7,transition:"cubic-in-out",transitionDuration:800,minOffset:12,value:"value"}},{restrict:"E",require:"^d3Chart",link:function(r,n,e,i){var a,o,u,l,c,s,d,f,h;return d=angular.extend(t(),e),u=i.getChart(),c=parseFloat(d.innerRadius),s=parseFloat(d.labelRadius),e.colors&&(l=function(){switch(e.colors){case"category20":return d3.scale.category20();case"category20b":return d3.scale.category20b();case"category20c":return d3.scale.category20c()}}()),f=d3.layout.pie().sort(null).value(function(t){return t[d.value]}),a=null,o=null,h=function(t){var r,n,a,u,h,g,m,p,v;return o||(o=i.getChart().append("g").attr("class","pie")),null!=t&&0!==t.length?(p=Math.min(i.innerWidth,i.innerHeight)/2,o.attr("transform","translate("+p+","+p+")"),r=d3.svg.arc().outerRadius(p).innerRadius(p*c),n=function(t){var n;return n=d3.interpolate(this._current,t),this._current=n(0),function(t){return r(n(t))}},h=d3.svg.arc().outerRadius(p*s).innerRadius(p*s),v=o.selectAll(".pie").data(f(t)),v.enter().append("path").attr("class",function(t,r){return"pie pie-"+r}).attr("d",r).each(function(t){return this._current=t}),e.colors&&v.style("fill",function(t,r){return l?l(r):t[e.color]}),v.exit().remove(),v.transition().ease(d.transition).duration(d.transitionDuration).attrTween("d",n),d.label?(m=null,g=+d.minOffset,a=function(t,r){var n,e,i,a,o,u,l,c,f;return l=h.centroid(t),d.avoidCollisions&&(c=[l[0],l[1]],this._position&&(c[0]-=this._position[0],c[1]-=this._position[1]),f=_.transform(this.getBoundingClientRect(),function(t,r,n){switch(n){case"left":return t[n]=r-g+c[0];case"top":return t[n]=r-g+c[1];case"right":return t[n]=r+g+c[0];case"bottom":return t[n]=r+g+c[1]}}),m&&!(f.right<m.left||f.left>m.right||f.bottom<m.top||f.top>m.bottom)&&(i=f.left+(f.right-f.left)/2,a=f.top+(f.bottom-f.top)/2,n=m.left+(m.right-m.left)/2,e=m.top+(m.bottom-m.top)/2,o=Math.sqrt(Math.pow(i-n,2)+Math.pow(a-e,2))/2,u=d3.svg.arc().outerRadius(p*s+o).innerRadius(p*s+o),l=u.centroid(t)),this._position=l,m=f),"translate("+l+")"},u=o.selectAll("text").data(f(t)),u.enter().append("text").style("text-anchor","middle").attr("class",function(t,r){return"pie-label pie-label-"+r}),u.exit().remove(),u.text(function(r,n){return t[n][d.label]}),u.transition().ease(d.transition).duration(d.transitionDuration).attr("transform",a)):void 0):void 0},i.registerElement(h,d.order)}}})},function(t,r,n){var e;e=n(15),e.module("ad3",[]),n(14),n(13),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11)},function(t,r,n){var e;e=n(1),angular.module("ad3").provider("d3locale",function(){var t;return t={},this.setLocales=function(r){return t=r},this.$get=function(){var r;return r=function(t){return e.format=t.numberFormat,e.time.format=t.timeFormat},{setLang:function(n){var i,a,o;try{return o=e.locale(t[n.toLowerCase()]),r(o)}catch(a){throw i=a,"d3locale error: '"+n+"' is a locale that either does not exist, or has not been loaded properly."}},setLocale:function(t){return r(e.locale(t))}}},this})},function(t,r,n){var e;e=n(1),angular.module("ad3").provider("d3Service",function(){var t;return t=this.defaults={},this.$get=["$cacheFactory","$rootScope","$q",function(r,n,i){var a;return a=t.cache||r("d3Service"),{csv:function(t,r,o){var u,l;return l=i.defer(),u=a.get(t),u&&(o&&o(rows),l.resolve(u)),e.csv(t,r,function(r){return n.$apply(function(){return o&&o(r),r?(a.put(t,r),l.resolve(r)):l.reject()})}),l.promise}}}],this})},function(t,r){t.exports=angular}]);
//# sourceMappingURL=angularD3.js.map